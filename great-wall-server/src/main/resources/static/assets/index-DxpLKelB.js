import{l as e,z as s,aq as t,j as a,C as r,b as i,c as l,ar as n,e as c,as as o,S as d,r as x,m}from"./index-BJPtjzMg.js";import{u}from"./context-BKE_YIwn.js";import{P as j}from"./useApiRequest-CanyN3dt.js";import{U as h,m as p,C as f,L as y,a as g,X as b,Y as N,b as v,c as w,d as k,A as q}from"./chart-DS1CPXLO.js";import"./popover-D_DRDR68.js";
/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=e("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),L=e("Clock11",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 9.5 8",key:"l5bg6f"}]]),_=e("GitCommitHorizontal",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]]),z=e("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),R=e("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),C=s.object({value:s.number({required_error:"不可以为空"})}),K=t(s.object({unit:s.string({required_error:"不可以为空"}),value:s.number({required_error:"不可以为空"})})),M=t(s.object({unit:s.string({required_error:"不可以为空"}),avgValue:s.number({required_error:"不可以为空"}),maxValue:s.number({required_error:"不可以为空"})})),A=s.object({label:s.string({required_error:"不可以为空"}),key:s.string({required_error:"不可以为空"})}),V=s.record(s.string({required_error:"不可以为空"}),s.union([s.string({required_error:"不可以为空"}),s.number({required_error:"不可以为空"})])),T=s.object({mapping:s.array(A),data:s.array(V)});
/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function $(){const{data:e,loading:s}=u((({dateRange:e})=>j("/api/route-monitor-metrics/count/request",{body:e,resultSchema:C})));return a.jsxs(r,{children:[a.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(l,{className:"text-sm font-medium",children:"总请求数"}),s?a.jsx(n,{className:"w-4 h-4"}):a.jsx(h,{className:"w-4 h-4"})]}),a.jsxs(c,{children:[a.jsx("div",{className:"text-2xl font-bold",children:(null==e?void 0:e.value)||0}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"请求数累计"})]})]})}function G(){const{data:e,loading:s}=u((({dateRange:e})=>j("/api/route-monitor-metrics/count/ip",{body:e,resultSchema:C})));return a.jsxs(r,{children:[a.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(l,{className:"text-sm font-medium",children:"IP 总数"}),s?a.jsx(n,{className:"w-4 h-4"}):a.jsx(R,{className:"w-4 h-4"})]}),a.jsxs(c,{children:[a.jsx("div",{className:"text-2xl font-bold",children:(null==e?void 0:e.value)||0}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"访问的 ip 累计"})]})]})}function P(){const{data:e,loading:s}=u((({dateRange:e})=>j("/api/route-monitor-metrics/count/status-5xx",{body:e,resultSchema:C})));return a.jsxs(r,{children:[a.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(l,{className:"text-sm font-medium",children:"5xx 错误数量"}),s?a.jsx(n,{className:"w-4 h-4"}):a.jsx(z,{className:"w-4 h-4"})]}),a.jsxs(c,{children:[a.jsx("div",{className:"text-2xl font-bold",children:(null==e?void 0:e.value)||0}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"500 <= 状态码"})]})]})}function W(){const{data:e,loading:s}=u((({dateRange:e})=>j("/api/route-monitor-metrics/sum/request-traffic",{body:e,resultSchema:C})));return a.jsxs(r,{children:[a.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(l,{className:"text-sm font-medium",children:"请求流量"}),s?a.jsx(n,{className:"w-4 h-4"}):a.jsx(L,{className:"w-4 h-4"})]}),a.jsxs(c,{children:[a.jsx("div",{className:"text-2xl font-bold",children:o(null==e?void 0:e.value,"0B")}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"请求流量累加之和"})]})]})}const B={views:{label:"qps"},value:{label:"qps",color:"hsl(var(--chart-1))"}};function H({size:e}){const{data:s,loading:t}=u((({dateRange:s})=>{return t={...s,...p(e.width-70,s)},j("/api/route-monitor-metrics/line/qps",{body:t,resultSchema:K});var t})),o=(null==s?void 0:s.records)||[];return a.jsxs(r,{children:[a.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(l,{className:"text-sm font-medium",children:"QPS"}),t?a.jsx(n,{className:"w-4 h-4"}):a.jsx(S,{className:"w-4 h-4"})]}),a.jsx(c,{children:a.jsx(f,{config:B,style:{height:"200px",width:"100%"},children:a.jsxs(y,{accessibilityLayer:!0,data:o,margin:{left:0,right:0,top:0},children:[a.jsx(g,{vertical:!1}),a.jsx(b,{dataKey:"unit",tickLine:!1,axisLine:!1,tickMargin:8,minTickGap:32}),a.jsx(N,{}),a.jsx(v,{content:a.jsx(w,{className:"w-[150px]",nameKey:"views"})}),a.jsx(k,{dataKey:"value",type:"monotone",strokeWidth:2,dot:!1})]})})})]})}function Q(){return a.jsx(d,{children:e=>a.jsx(H,{size:e})})}const D={avgValue:{label:"平均值",color:"hsl(var(--chart-1))"},maxValue:{label:"最大值",color:"hsl(var(--chart-2))"}};function E({size:e}){const{data:s,loading:t}=u((({dateRange:s})=>{return t={...s,...p(e.width-70,s)},j("/api/route-monitor-metrics/line/duration",{body:t,resultSchema:M});var t})),o=(null==s?void 0:s.records)||[],[d,h]=x.useState("avgValue");return a.jsxs(r,{children:[a.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(l,{className:"text-sm font-medium",children:"Duration"}),t?a.jsx(n,{className:"w-4 h-4"}):a.jsx(q,{className:"w-4 h-4"})]}),a.jsx(c,{children:a.jsxs(f,{config:D,style:{height:"200px",width:"100%"},children:[a.jsxs(y,{accessibilityLayer:!0,data:o,margin:{left:0,right:0,top:0},children:[a.jsx(g,{vertical:!1}),a.jsx(b,{dataKey:"unit",tickLine:!1,axisLine:!1,tickMargin:8,minTickGap:32}),a.jsx(N,{tickFormatter:e=>`${e}/ms`}),a.jsx(v,{content:a.jsx(w,{className:"w-[150px]"})}),a.jsx(k,{dataKey:d,type:"monotone",stroke:`var(--color-${d})`,strokeWidth:2,dot:!1})]}),a.jsx("div",{className:"flex flex-row items-center justify-center gap-8",children:Object.keys(D).map((e=>{const s=e;return a.jsxs("div",{className:m("flex flex-row items-center gap-2 cursor-pointer",{"opacity-50":d!==s}),onClick:()=>h(s),children:[a.jsx("div",{className:"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg] h-2.5 w-2.5",style:{background:`var(--color-${s})`}}),a.jsx("span",{children:D[s].label})]},s)}))})]})})]})}function F(){return a.jsx(d,{children:e=>a.jsx(E,{size:e})})}function I({size:e}){const{data:s,loading:t}=u((({dateRange:s})=>{return t={...s,...p(e.width-70,s),top:10},j("/api/route-monitor-metrics/line/top-qps",{body:t,resultSchema:T});var t})),o=(null==s?void 0:s.data)||[],d=(null==s?void 0:s.mapping)||[],x={};return d.forEach(((e,s)=>{x[e.key]={label:e.label,color:`hsl(var(--chart-${s+1}))`}})),a.jsxs(r,{children:[a.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(l,{className:"text-sm font-medium",children:"Top Api QPS"}),t?a.jsx(n,{className:"w-4 h-4"}):a.jsx(_,{className:"w-4 h-4"})]}),a.jsx(c,{children:a.jsx(f,{config:x,style:{height:"320px",width:"100%"},children:a.jsxs(y,{accessibilityLayer:!0,data:o,margin:{left:0,right:0,top:0},children:[a.jsx(g,{vertical:!1}),a.jsx(b,{dataKey:"unit",tickLine:!1,axisLine:!1,tickMargin:8,minTickGap:32}),a.jsx(N,{}),a.jsx(v,{content:a.jsx(w,{className:"w-[420px]"})}),null==d?void 0:d.map((e=>a.jsx(k,{dataKey:e.key,type:"monotone",stroke:`var(--color-${e.key})`,strokeWidth:2,dot:!1},e.key)))]})})})]})}function O(){return a.jsx(d,{children:e=>a.jsx(I,{size:e})})}function U(){const{data:e,loading:s}=u((({dateRange:e})=>j("/api/route-monitor-metrics/count/status-4xx",{body:e,resultSchema:C})));return a.jsxs(r,{children:[a.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(l,{className:"text-sm font-medium",children:"4xx 错误数量"}),s?a.jsx(n,{className:"w-4 h-4"}):a.jsx(z,{className:"w-4 h-4"})]}),a.jsxs(c,{children:[a.jsx("div",{className:"text-2xl font-bold",children:(null==e?void 0:e.value)||0}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"400 <= 状态码 < 500"})]})]})}function X(){const{data:e,loading:s}=u((({dateRange:e})=>j("/api/route-monitor-metrics/sum/response-traffic",{body:e,resultSchema:C})));return a.jsxs(r,{children:[a.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(l,{className:"text-sm font-medium",children:"响应流量"}),s?a.jsx(n,{className:"w-4 h-4"}):a.jsx(L,{className:"w-4 h-4"})]}),a.jsxs(c,{children:[a.jsx("div",{className:"text-2xl font-bold",children:o(null==e?void 0:e.value,"0B")}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"响应流量累加之和"})]})]})}function Y(){return a.jsxs("div",{className:"w-full h-full space-y-4",children:[a.jsxs("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-6",children:[a.jsx($,{}),a.jsx(G,{}),a.jsx(W,{}),a.jsx(X,{}),a.jsx(U,{}),a.jsx(P,{})]}),a.jsxs("div",{className:"grid gap-4 grid-cols-2",children:[a.jsx(Q,{}),a.jsx(F,{})]}),a.jsx("div",{className:"grid grid-cols-1",children:a.jsx(O,{})})]})}export{Y as default};
