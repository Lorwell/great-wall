import{n as l,W as e,j as a,X as n,Y as o,Z as s,a0 as i,u as t}from"./index-6UROZn92.js";import{D as c,R as r,d as u,c as d,a as m,b as p}from"./data-table-row-actions-Cgd5F1xl.js";import{u as f}from"./useApiRequest-CZ8xUyDq.js";import{a as g,s as b}from"./index-Dh-QipTm.js";import{L as h}from"./layout-panel-left-BE726iRi.js";import"./popover-FSZAmMlA.js";import"./separator-CJC-iFxe.js";import"./checkbox-D6MxXwjp.js";
/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=l("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),w=l("ShieldBan",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m4.243 5.21 14.39 12.472",key:"1c9a7c"}]]),x=l=>{const{row:n,column:o,cell:s,table:i,onView:t,onOnline:u,onOffline:d,onEdit:m}=l,p={row:n,column:o,cell:s,table:i},f=n.getValue("status"),g=[{key:"view",label:"查看",icon:r,onClick:()=>null==t?void 0:t(p)},{key:"edit",label:"编辑",icon:j,onClick:()=>null==m?void 0:m(p)}];return e.ONLINE===f?g.push({key:"offline",label:"下线",icon:w,onClick:()=>null==d?void 0:d(p)}):e.OFFLINE===f&&g.push({key:"online",label:"上线",icon:w,onClick:()=>null==u?void 0:u(p)}),a.jsx(c,{row:n,options:g})},v=({event:l})=>[u(),d({columnId:"name",label:"名称",size:120,enableSorting:!1,cell:({getValue:l})=>l()}),d({columnId:"describe",label:"描述",size:200,enableSorting:!1,cell:({getValue:l})=>l()}),d({columnId:"urls",label:"路由地址",size:200,enableSorting:!1,cell:({getValue:l})=>{const e=l();return a.jsxs("div",{className:"w-full flex gap-1",children:[a.jsx("div",{className:"truncate",style:{width:"calc(100% - 25px)"},children:e.map((l=>l.url)).join(", ")}),a.jsxs(n,{children:[a.jsx(o,{children:a.jsx(s,{variant:"secondary",className:"cursor-pointer",children:e.length})}),a.jsx(i,{children:a.jsx("div",{className:"flex flex-col gap-1",children:e.map(((l,e)=>a.jsxs("span",{children:[l.url,"  -  权重：",l.weight]},e)))})})]})]})}}),d({columnId:"priority",label:"优先级",size:100,cell:({getValue:l})=>l()}),d({columnId:"status",label:"状态",size:80,cell:({getValue:l})=>l()}),d({columnId:"createTime",label:"创建时间",size:120,cell:({getValue:l})=>m(l()).format("YYYY-MM-DD HH:mm:ss")}),d({columnId:"lastUpdateTime",label:"最后修改时间",size:150,cell:({getValue:l})=>m(l()).format("YYYY-MM-DD HH:mm:ss")}),{id:"_actions",size:50,cell:({cell:e,column:n,row:o,table:s})=>a.jsx(x,{...l,row:o,cell:e,column:n,table:s})}];
/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function y(){const l=t(),{data:n,loading:o,run:s}=f(g),{loading:i,runAsync:c}=f(b,{manual:!0});return a.jsx("div",{className:"w-full h-full",children:a.jsx(p,{data:(null==n?void 0:n.records)||[],rowCount:null==n?void 0:n.page.total,searchColumnId:"name",manual:!1,loading:o||i,columns:v({event:{onView:function(e){const a=e.row.original.id;l(`/manage/app-routes/${a}/preview`)},onEdit:function(e){const a=e.row.original.id;l(`/manage/app-routes/${a}`)},onOffline:async function(l){const a=l.row.original.id;await c(a,e.OFFLINE),s()},onOnline:async function(l){const a=l.row.original.id;await c(a,e.ONLINE),s()}}}),plusOptions:[{label:"新建应用路由",icon:h,onClick:()=>l("/manage/app-routes/add/base-info")}]})})}export{y as default};
