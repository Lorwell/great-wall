import{H as s,g as t}from"./useApiRequest-CanyN3dt.js";import{K as e,a4 as o,b8 as i}from"./index-BJPtjzMg.js";function n(n,r){const a=!!e(r)||r,{setError:f}=n;return async e=>{try{return await e()}catch(n){if(n instanceof s){if(422===n.status){const s=n.body.fields;for(let t in s){const e=s[t];if(e.length>0){const s=e[0];f(t,{type:s.code,message:s.message})}}}else if(a){let s=t(n);o.warning(s,{position:"top-right"})}}else if(a){let s;if(n instanceof Error){const t=n.message;s="未知的异常"+(i(t)?"!":`: ${t}`)}else s="未知的异常!";o.warning(s,{position:"top-right"})}throw n}}}export{n as u};
